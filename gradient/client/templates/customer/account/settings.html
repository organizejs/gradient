{% from "modules/_account_fields.html" import account_field, card_field %}
{% extends 'customer/account.html' %}
{% block account_content %}

<div id="settings-module" class="content-pane">
  <div class="module">
    <div class="module-content">
      <div class="account-content-title"><h4>Settings</h4></div>
      <div class="account-content-options">
      </div>
    </div>
    <div class="module-content">
      <div class="account-property">
        <div class="account-property-label">Subscribed to Newsletter</div>
        <div class="account-property-value-container">
          <div class="account-property-value">
            {% if current_user.subscribed == True %}
            Subscribed
            {% else %}
            Not Subscribed
            {% endif %}
          </div>
        </div>
      </div>
      <div class="account-footer">
        <div class="account-action">
          {% if current_user.subscribed == True %}
          <a href="{{ url_for('customer.subscribe', subscribe=False) }}">
            <div class="account-button">Unsubscribe</div>
          </a>
          {% else %}
          <a href="{{ url_for('customer.subscribe', subscribe=True) }}">
            <div class="account-button">Subscribe</div>
          </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="module">
    <div class="module-content">
      <div class="account-content-title"><h4>Manage your cards</h4></div>
      <div class="account-content-action">
        <a href="{{ url_for('customer.add_card') }}"><button>Add Card</button></a>
      </div>
    </div>
    <div class="module-content">
      {% if cards.data is defined and cards.data|length > 0 %}
        {% for card in cards.data %}
        {{ card_field(card, loop.cycle('odd', 'even')) }}
        {% endfor %}
      {% else %}
        You have no cards
      {% endif %}
    </div>
  </div>

  <div class="module">
    <div class="module-content">
      <div class="account-content-title"><h4>Account</h4></div>
    </div>
    <div class="module-content">
      <div class="account-property">
        <div class="account-property-label">Email</div>
        <div class="account-property-value-container">
          <div class="account-property-value">
            {{ current_user.email }}
          </div>
        </div>
      </div>
      <div class="account-property">
        <div class="account-property-label">First Name</div>
        <div class="account-property-value-container">
          <div class="account-property-value">
            {{ current_user.first_name }}
          </div>
        </div>
      </div>
      <div class="account-property">
        <div class="account-property-label">Last Name</div>
        <div class="account-property-value-container">
          <div class="account-property-value">
            {{ current_user.last_name }}
          </div>
        </div>
      </div>
      <div class="account-property">
        <a href="{{ url_for('security.change_password') }}"><div class="account-property-label">Change Password</div></a>
        <div class="account-property-value-container">
          <div class="account-property-value">
            *****
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
